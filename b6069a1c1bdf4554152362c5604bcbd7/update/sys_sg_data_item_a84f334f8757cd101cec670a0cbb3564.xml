<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_sg_data_item">
    <sys_sg_data_item action="INSERT_OR_UPDATE">
        <condition_type>script</condition_type>
        <description/>
        <group_by/>
        <instance_relative_url_qc/>
        <name>my_List_list</name>
        <query_condition table="alm_asset">u_listLIKE{{list_name}}^EQ<item endquery="false" field="u_list" goto="false" newquery="false" operator="LIKE" or="false" value="{{list_name}}"/>
            <item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/>
        </query_condition>
        <query_condition_script><![CDATA[(function getQueryString(input) {
    //Type appropriate comment here, and begin script below

    var asset_list = "";
    var queryString = "";
    var list = new GlideRecord('sn_hamp_assets_list');
    list.addQuery('u_name', input.list_name);
    list.addQuery('u_active', true);
    list.query();
    if(list.next())
    {
queryString = "u_list=" + list.sys_id;
  var asset_tag = "";
    var entered_asset_tag = input.asset_tag;
    for (var i = 0; i < entered_asset_tag.length; i++)
    {
asset_tag += entered_asset_tag[i] + ',';
  
    var gr = new GlideRecord('alm_hardware');
    gr.addQuery('asset_tag', 'IN', asset_tag );
    gr.query();
    while (gr.next()){
    var liste = gr.u_list;
    var sysId_list = list.sys_id;
    if(liste == "")
	{
    gr.u_list =  sysId_list;
	}
  else {

      var arrayUtil = new global.ArrayUtil();
      liste = gr.u_list + ',' + sysId_list;
		liste = liste.split(',');
	  var array = [];
	  array = arrayUtil.unique(liste);
      gr.u_list = array.toString();
      
  }
gr.u_last_discovered = input.inventory_date;
gr.u_mobile_list = list.sys_id;
gr.update();
    } 
   }

	return queryString;
   }
  
 
//else     
//{
//queryString ='u_list=' + input.list_name;
//return queryString; 
//}


})(input);]]></query_condition_script>
        <sys_class_name>sys_sg_data_item</sys_class_name>
        <sys_created_by>cvigneron</sys_created_by>
        <sys_created_on>2022-05-11 11:24:09</sys_created_on>
        <sys_customer_update>false</sys_customer_update>
        <sys_id>a84f334f8757cd101cec670a0cbb3564</sys_id>
        <sys_mod_count>49</sys_mod_count>
        <sys_name>my_List_list</sys_name>
        <sys_package display_value="Fluid'IT" source="x_edfm_fluid_it">b6069a1c1bdf4554152362c5604bcbd7</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Fluid'IT">b6069a1c1bdf4554152362c5604bcbd7</sys_scope>
        <sys_update_name>sys_sg_data_item_a84f334f8757cd101cec670a0cbb3564</sys_update_name>
        <sys_updated_by>GD073B5L</sys_updated_by>
        <sys_updated_on>2022-11-25 15:30:42</sys_updated_on>
        <table>alm_asset</table>
    </sys_sg_data_item>
</record_update>
